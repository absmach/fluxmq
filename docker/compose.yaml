services:
  fluxmq:
    image: ghcr.io/absmach/fluxmq:latest
    command: ["--config", "/etc/fluxmq/config.yaml"]
    ports:
      - "1883:1883"   # MQTT
      - "8083:8083"   # MQTT over WebSocket
      - "8080:8080"   # HTTP bridge
      - "5672:5672"   # AMQP 1.0
      - "5682:5682"   # AMQP 0.9.1
      - "8081:8081"   # Health
    volumes:
      - ./config.yaml:/etc/fluxmq/config.yaml:ro
      - fluxmq-data:/var/lib/fluxmq
    restart: unless-stopped

volumes:
  fluxmq-data:
